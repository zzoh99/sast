<?xml version="1.0" encoding="UTF-8"?>
<!--
	작업현황
 -->
<root>

	<!-- 작업 현황 조회  -->
	<query id="selectYeaCalcProcessStatusPopupInfo">
		<![CDATA[ SELECT (SELECT
					              CASE
					                  WHEN CNT = 0
					                  	THEN '미생성'
					                  WHEN CNT = 1
					                  	THEN (SELECT A.PAY_ACTION_NM
					                            FROM TCPN201 A
					                           WHERE A.ENTER_CD = #ssnEnterCd#
					                             AND A.PAY_YM LIKE #searchWorkYy#||'%'
					                             AND A.PAY_CD = 'Y1')
					                  ELSE '중복'
					              END PAY_ACTION_NM
					         FROM (SELECT (SELECT COUNT(1) AS CNT
					                        FROM TCPN201 A
					                       WHERE A.ENTER_CD = #ssnEnterCd#
					                         AND A.PAY_YM LIKE #searchWorkYy#||'%'
					                         AND A.PAY_CD = 'Y1' ) AS CNT
					                 FROM DUAL)
					       ) AS PAY_ACTION_NM,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(SABUN),0),'999,999,990'))
					          FROM TCPN811
					         WHERE ENTER_CD = #ssnEnterCd#
					           AND WORK_YY = #searchWorkYy#
					           AND ADJUST_TYPE = '1'
					           AND PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(EXCEPT_YN, 'N') = 'N'
                               $query$
					       ) AS MAN_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(SABUN),0),'999,999,990'))
					          FROM TCPN811
					         WHERE ENTER_CD = #ssnEnterCd#
					           AND WORK_YY = #searchWorkYy#
					           AND ADJUST_TYPE = '1'
					           AND PAY_ACTION_CD = #searchPayActionCd#
                               $query$
					       ) AS TOT_MAN_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(SABUN),0),'999,999,990'))
					          FROM TCPN811
					         WHERE ENTER_CD = #ssnEnterCd#
					           AND WORK_YY = #searchWorkYy#
					           AND ADJUST_TYPE = '1'
					           AND PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(EXCEPT_YN, 'N') = 'Y'
                               $query$
					       ) AS EXCEPT_CNT,
					       (SELECT COUNT(1) AS OPT_CNT
					          FROM /* 20231201
								     [ 연말정산계산 ]
										- 버그 : 연말정산옵션에서 기준년도별 조회 안됨 (기준년도 의미없음)
										     => 조회시 현재년도(sysdate)와 기준년도를 비교하여 과거면 TYEA955, 현재면 TSYS955를 조회함
										        문제는 TYEA955를 년도별 저장을 할때 그 시점에 그냥 TSYS955를 같이 업데이트 처리함
										     => 기능을 살려보자 :: [ 연말정산 옵션 ](팝업)과 [ 전년대비 변경옵션 ] (레이어) 동기화 필요
										      !! 주의) TYEA955는 년도별 운영자료
										              TSYS955는 디폴트 운영자료
										               → 참조불가 : 실시간으로 언제든 데이터가 조정될 수 있음
										      !! 개선) 신규 테이블(TYEA956)에 연말정산 마감 버튼 클릭 시, 후처리로 해당년도의 옵션을 TYEA956에 갱신
										               → [ 연말정산계산 ]화면에서 전년대비 자료 참조를 TYEA956에서 확인
										      !! 개선사항시행) 2023년 귀속부터 기능 동작
										               → 전년도 2022년 자료부터 저장
										               → 단, 2022년도 자료는 2023-12-26일 1차 배포 시에 확정상태로 MIG 예정이므로
										                    2022년도 연말정산 계산 당시의 옵션을 정확하게 기록하는데 한계가 있음
						          TYEA955 A, */
					              TYEA956 A,
					              (  /* 20231201 TYEA955설정을 1순위로 보도록 로직 조정. (F_YEA_GET_STD_CD_VALUE 함수와 로직 동기화) */		
								    SELECT #ssnEnterCd# AS ENTER_CD
								         , NVL(B.STD_CD, A.STD_CD) AS STD_CD
								         , NVL(B.STD_NM, A.STD_NM) AS STD_NM
								         , NVL(B.STD_CD_VALUE, A.STD_CD_VALUE) AS STD_CD_VALUE
									  FROM TSYS955 A
								         , TYEA955 B
									 WHERE A.ENTER_CD    = #ssnEnterCd#
									   AND A.STD_CD     IN ('CPN_MONPAY_RETRY_YN', 'CPN_YEA_FAMILY' , 'CPN_YEA_RETRO_YN' , 'CPN_YEA_SIM_YN' , 'CPN_YEA_MON_SHOW_YN' , 'CPN_WORK_INCOME_PRINT_BUTTON','CPN_TAX_CUTVAL','CPN_YEA_FEEDBACK_YN','CPN_YEA_PDF_YN', 'CPN_YEA_DED_PRINT_YN', 'CPN_YEA_JINGSUJA_TYPE', 'CPN_YEA_DOJANG_TYPE','CPN_YEA_PAYTOT_YN','CPN_YEA_PAYTAX_YN','CPN_YEA_PAYTAX_INS_YN', 'CPN_YEA_PREWORK_YN', 'CPN_YEA_HOU_INFO_YN', 'CPN_YEA_ADD_FILE_YN', 'YEACALCLST_STAMP_YN', 'CPN_YEA_PAY_STD_TYPE','CPN_YEA_SIGN_YN', 'CPN_YEA_PDF_TYPE', 'CPN_TAX_SPC_YN')
									   AND A.ENTER_CD    = B.ENTER_CD (+)
									   AND A.STD_CD      = B.STD_CD (+)
									   AND B.WORK_YY (+) = #searchWorkYy#
							        ) B
					        WHERE A.ENTER_CD(+) = B.ENTER_CD
					          AND A.STD_CD(+)   = B.STD_CD
					          AND A.WORK_YY(+)  = TO_CHAR(TO_NUMBER(#searchWorkYy#)-1)
					          AND A.ENTER_CD(+) = #ssnEnterCd#
					          AND NVL(A.STD_CD_VALUE, '#') != NVL(B.STD_CD_VALUE, '#')
					       ) AS DIF_OPT_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(DISTINCT(A.SABUN)),0),'999,999,990'))
					         FROM TCPN817 A, TCPN811 B
					        WHERE A.ENTER_CD = B.ENTER_CD
					          AND A.WORK_YY = B.WORK_YY
					          AND A.ADJUST_TYPE = B.ADJUST_TYPE
					          AND A.SABUN = B.SABUN
					          AND A.ENTER_CD = #ssnEnterCd#
					          AND A.WORK_YY = #searchWorkYy#
					          AND A.ADJUST_TYPE = #searchAdjustType#
					          AND NVL(B.EXCEPT_YN, 'N') = 'N'
                              $queryB$
					       ) AS BF_COM_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(DISTINCT(A.SABUN)),0),'999,999,990'))
					          FROM (
						       SELECT DISTINCT(A.SABUN) AS SABUN
						         FROM TCPN813 A, TCPN811 B
						        WHERE A.ENTER_CD = B.ENTER_CD
						          AND A.WORK_YY = B.WORK_YY
						          AND A.ADJUST_TYPE = B.ADJUST_TYPE
						          AND A.SABUN = B.SABUN
						          AND A.ENTER_CD = #ssnEnterCd#
						          AND A.WORK_YY = #searchWorkYy#
					              AND NVL(B.EXCEPT_YN, 'N') = 'N'
	                              $queryB$
						          AND A.ADJUST_TYPE = '1'					          
						          UNION ALL					          
						       SELECT DISTINCT(A.SABUN) AS SABUN
						         FROM TCPN815 A, TCPN811 B
						        WHERE A.ENTER_CD = B.ENTER_CD
						          AND A.WORK_YY = B.WORK_YY
						          AND A.ADJUST_TYPE = B.ADJUST_TYPE
						          AND A.SABUN = B.SABUN
						          AND A.ENTER_CD = #ssnEnterCd#
						          AND A.WORK_YY = #searchWorkYy#
					              AND NVL(B.EXCEPT_YN, 'N') = 'N'
	                              $queryB$
						          AND A.ADJUST_TYPE = '1'
						          AND A.ADJ_ELEMENT_CD IN ('C010_20','C010_22','C010_15')) A
					       ) AS MONPAY1_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(DISTINCT(A.SABUN)),0),'999,999,990'))
					          FROM (
						       SELECT DISTINCT(A.SABUN) AS SABUN
						         FROM TCPN813 A, TCPN811 B
						        WHERE A.ENTER_CD = B.ENTER_CD
						          AND A.WORK_YY = B.WORK_YY
						          AND A.ADJUST_TYPE = B.ADJUST_TYPE
						          AND A.SABUN = B.SABUN
						          AND A.ENTER_CD = #ssnEnterCd#
						          AND A.WORK_YY = #searchWorkYy#
					              AND NVL(B.EXCEPT_YN, 'N') = 'N'
	                              $queryB$
						          AND A.ADJUST_TYPE = '3'					          
						          UNION ALL					          
						       SELECT DISTINCT(A.SABUN) AS SABUN
						         FROM TCPN815 A, TCPN811 B
						        WHERE A.ENTER_CD = B.ENTER_CD
						          AND A.WORK_YY = B.WORK_YY
						          AND A.ADJUST_TYPE = B.ADJUST_TYPE
						          AND A.SABUN = B.SABUN
						          AND A.ENTER_CD = #ssnEnterCd#
						          AND A.WORK_YY = #searchWorkYy#
					              AND NVL(B.EXCEPT_YN, 'N') = 'N'
	                              $queryB$
						          AND A.ADJUST_TYPE = '3'
						          AND A.ADJ_ELEMENT_CD IN ('C010_20','C010_22','C010_15')) A
					       ) AS MONPAY3_CNT,
						   (SELECT TRIM(TO_CHAR(MON,'999,999,999,999,999,990'))
							  FROM (SELECT
							              (SELECT NVL(SUM(NVL(G.PAY_MON,0)),0)+NVL(SUM(NVL(G.BONUS_MON,0)),0)+NVL(SUM(NVL(G.ETC_BONUS_MON,0)),0)+NVL(SUM(NVL(G.STOCK_BUY_MON,0)),0)+NVL(SUM(NVL(G.STOCK_UNION_MON,0)),0)+NVL(SUM(NVL(G.IMWON_RET_OVER_MON,0)),0)
							                FROM TCPN813 G,
							                     TCPN811 H
							               WHERE G.ENTER_CD = H.ENTER_CD
							                 AND G.WORK_YY = H.WORK_YY
							                 AND G.ADJUST_TYPE = H.ADJUST_TYPE
							                 AND G.SABUN = H.SABUN
							                 AND G.ENTER_CD = #ssnEnterCd#
							                 AND G.WORK_YY = #searchWorkYy#
					                         AND NVL(H.EXCEPT_YN, 'N') = 'N'
                                             $queryH$
							                 AND G.ADJUST_TYPE = '1' 
							                GROUP BY G.ENTER_CD,
							                         G.WORK_YY,
							                         G.ADJUST_TYPE) +
							              (SELECT NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_20'),0)),0)
							                      + NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_22'),0)),0)
							                      + NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_15'),0)),0) AS MON
							                FROM TCPN811 G
							               WHERE G.ENTER_CD = #ssnEnterCd#
							                 AND G.WORK_YY = #searchWorkYy#
					                         AND NVL(G.EXCEPT_YN, 'N') = 'N'
                                             $queryG$
							                 AND G.ADJUST_TYPE = '1' ) AS MON
							          FROM DUAL)
							) AS MONPAY1_MON,
						   (SELECT TRIM(TO_CHAR(MON,'999,999,999,999,999,990'))
							  FROM (SELECT
							              (SELECT NVL(SUM(NVL(G.PAY_MON,0)),0)+NVL(SUM(NVL(G.BONUS_MON,0)),0)+NVL(SUM(NVL(G.ETC_BONUS_MON,0)),0)+NVL(SUM(NVL(G.STOCK_BUY_MON,0)),0)+NVL(SUM(NVL(G.STOCK_UNION_MON,0)),0)+NVL(SUM(NVL(G.IMWON_RET_OVER_MON,0)),0)
							                FROM TCPN813 G,
							                     TCPN811 H
							               WHERE G.ENTER_CD = H.ENTER_CD
							                 AND G.WORK_YY = H.WORK_YY
							                 AND G.ADJUST_TYPE = H.ADJUST_TYPE
							                 AND G.SABUN = H.SABUN
							                 AND G.ENTER_CD = #ssnEnterCd#
							                 AND G.WORK_YY = #searchWorkYy#
					                         AND NVL(H.EXCEPT_YN, 'N') = 'N'
                                             $queryH$
							                 AND G.ADJUST_TYPE = '3'
							                GROUP BY G.ENTER_CD,
							                         G.WORK_YY,
							                         G.ADJUST_TYPE) +
							              (SELECT NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_20'),0)),0)
							                      + NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_22'),0)),0)
							                      + NVL(SUM(NVL(F_CPN_YEA_ETC_MON(G.ENTER_CD,G.WORK_YY,G.ADJUST_TYPE,G.SABUN,'C010_15'),0)),0) AS MON
							                FROM TCPN811 G
							               WHERE G.ENTER_CD = #ssnEnterCd#
							                 AND G.WORK_YY = #searchWorkYy#
					                         AND NVL(G.EXCEPT_YN, 'N') = 'N'
                                             $queryG$
							                 AND G.ADJUST_TYPE = '3' ) AS MON
							          FROM DUAL)
							) AS MONPAY3_MON,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990'))
					          FROM (SELECT A.SABUN,
					                       NVL(SUM(NVL(A.PAY_MON,0)+NVL(A.BONUS_MON,0)+NVL(A.ETC_BONUS_MON,0)+NVL(A.STOCK_BUY_MON,0)+NVL(A.STOCK_UNION_MON,0)),0) AS MON
					                  FROM TCPN813 A, TCPN811 B
							         WHERE A.ENTER_CD = B.ENTER_CD
							           AND A.WORK_YY = B.WORK_YY
							           AND A.ADJUST_TYPE = B.ADJUST_TYPE
 							           AND A.SABUN = B.SABUN
							           AND A.ENTER_CD = #ssnEnterCd#
					                   AND A.WORK_YY = #searchWorkYy#
					                   AND A.ADJUST_TYPE = #searchAdjustType#
					                   AND NVL(B.EXCEPT_YN, 'N') = 'N'
                                       $queryB$
					                 GROUP BY A.SABUN)
					          WHERE MON < 0
						   ) AS MINUS_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990')) AS POINT_CNT
					          FROM (SELECT A.SABUN,
					                       NVL(SUM(NVL(A.PAY_MON,0)+NVL(A.BONUS_MON,0)+NVL(A.ETC_BONUS_MON,0)+NVL(A.STOCK_BUY_MON,0)+NVL(A.STOCK_UNION_MON,0)),0) AS MON
					                  FROM TCPN813 A, TCPN811 B
							         WHERE A.ENTER_CD = B.ENTER_CD
							           AND A.WORK_YY = B.WORK_YY
							           AND A.ADJUST_TYPE = B.ADJUST_TYPE
							           AND A.SABUN = B.SABUN
							           AND A.ENTER_CD = #ssnEnterCd#
					                   AND A.WORK_YY = #searchWorkYy#
					                   AND A.ADJUST_TYPE = #searchAdjustType#
					                   AND NVL(B.EXCEPT_YN, 'N') = 'N'
                                       $queryB$
					                 GROUP BY A.SABUN)
					         WHERE MOD(MON,1) != 0
					       ) AS POINT_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'2','1') = '1'
					       ) AS ADDR_Y_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'2','1') = '0'
					       ) AS ADDR_N_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'1','1') = '1'
					       ) AS PER_Y_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(1),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'1','1') = '0'
					       ) AS PER_N_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(DISTINCT(A.SABUN)),'999,999,990'))
							  FROM TCPN851 A,
							       TCPN811 B
							 WHERE A.ENTER_CD = B.ENTER_CD
							       AND A.WORK_YY = B.WORK_YY
							       AND A.ADJUST_TYPE = B.ADJUST_TYPE
							       AND A.SABUN = B.SABUN
							       AND A.ENTER_CD = #ssnEnterCd#
							       AND A.WORK_YY = #searchWorkYy#
							       AND A.ADJUST_TYPE = #searchAdjustType#
					               AND NVL(B.EXCEPT_YN, 'N') = 'N'
                                   $queryB$
							       AND A.FORM_CD NOT IN ('P102M', 'O101M')
					       ) AS PDF_Y_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND A.SABUN NOT IN  (SELECT DISTINCT(G.SABUN)
					                                  FROM TCPN851 G
					                                 WHERE G.ENTER_CD = #ssnEnterCd#
					                                   AND G.WORK_YY = #searchWorkYy#
					                                   AND G.ADJUST_TYPE = '1'
					                                   AND G.FORM_CD NOT IN ('P102M', 'O101M'))
					       ) AS PDF_N_CNT,
					       (SELECT TRIM(TO_CHAR(COUNT(DISTINCT(A.SABUN)),'999,999,990'))
							  FROM TCPN821 A,
							       TCPN811 B
							 WHERE A.ENTER_CD = B.ENTER_CD
							       AND A.WORK_YY = B.WORK_YY
							       AND A.ADJUST_TYPE = B.ADJUST_TYPE
							       AND A.SABUN = B.SABUN
							       AND A.ENTER_CD = #ssnEnterCd#
							       AND A.WORK_YY = #searchWorkYy#
							       AND A.ADJUST_TYPE = #searchAdjustType#
					               AND NVL(B.EXCEPT_YN, 'N') = 'N'
                                   $queryB$
					       ) AS CARD_Y_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND A.SABUN NOT IN (SELECT DISTINCT(G.SABUN)
					                   			     FROM TCPN821 G
					           					    WHERE G.ENTER_CD = #ssnEnterCd#
					                          	      AND G.WORK_YY = #searchWorkYy#
					                        	      AND G.ADJUST_TYPE = '1')
					       ) AS CARD_N_CNT,
						   (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND A.INPUT_CLOSE_YN = 'Y'
					       ) AS INPUT_CLOSE_Y_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND NVL(A.INPUT_CLOSE_YN,'N') = 'N'
					       ) AS INPUT_CLOSE_N_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND A.APPRV_YN = 'Y'
					       ) AS APPRV_Y_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND NVL(A.APPRV_YN,'N') = 'N'
					       ) AS APPRV_N_CNT,
					       (SELECT TRIM(TO_CHAR(NVL(COUNT(A.SABUN),0),'999,999,990'))
					          FROM TCPN811 A
					         WHERE A.ENTER_CD = #ssnEnterCd#
					           AND A.WORK_YY = #searchWorkYy#
					           AND A.ADJUST_TYPE = #searchAdjustType#
					           AND A.PAY_ACTION_CD = #searchPayActionCd#
					           AND NVL(A.EXCEPT_YN, 'N') = 'N'
                               $queryA$
					           AND A.RESULT_CONFIRM_YN = 'Y'
					       ) AS CONFIRM_Y_CNT
					     FROM DUAL
		]]>
	</query>
	<!-- 연말정산 대상자  -->
	<query id="selectManTargetList">
		<![CDATA[
			SELECT A.SABUN
			     , B.NAME
			     , F_COM_GET_ORG_NM(A.ENTER_CD,A.ORG_CD,A.WORK_YY || '1231') AS ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = '1'
			  AND A.PAY_ACTION_CD = #searchPayActionCd#
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			  AND NVL(A.EXCEPT_YN, 'N') = 'N'
			  $queryA$
			ORDER BY A.SABUN
	   ]]>
	</query>
	<!-- 전년대비 변경 옵션 조회  -->
	<query id="selectDifOptList">
		<![CDATA[
			SELECT A.STD_NM AS OPT_NM,
			       CASE
			           WHEN B.STD_CD = 'CPN_YEA_FAMILY'
			           THEN DECODE(B.STD_CD_VALUE,'-1','Y','0','N')
			           WHEN B.STD_CD = 'CPN_YEA_MON_SHOW_YN'
			           THEN DECODE(B.STD_CD_VALUE,'A','관리자만',B.STD_CD_VALUE)
			           WHEN B.STD_CD = 'CPN_WORK_INCOME_PRINT_BUTTON'
			           THEN DECODE(B.STD_CD_VALUE,'1','Y','0','N')
			           WHEN B.STD_CD = 'CPN_TAX_CUTVAL'
			           THEN DECODE(B.STD_CD_VALUE,'0','1원','-1','10원')
			           WHEN B.STD_CD = 'CPN_YEA_DOJANG_TYPE'
			           THEN DECODE(B.STD_CD_VALUE,'2','증명서담당','5','회사인장')
			           WHEN B.STD_CD = 'CPN_YEA_JINGSUJA_TYPE'
			           THEN DECODE(B.STD_CD_VALUE,'C','회사명','P','대표자명')
			           WHEN B.STD_CD = 'CPN_YEA_PAY_STD_TYPE'
			           THEN DECODE(B.STD_CD_VALUE,'E','입사일','G','그룹입사일')
			           ELSE NVL(B.STD_CD_VALUE,'신규')
			       END BF_OPT_VAL,
			       CASE
			           WHEN A.STD_CD = 'CPN_YEA_FAMILY'
			           THEN DECODE(A.STD_CD_VALUE,'-1','Y','0','N')
			           WHEN A.STD_CD = 'CPN_YEA_MON_SHOW_YN'
			           THEN DECODE(A.STD_CD_VALUE,'A','관리자만',A.STD_CD_VALUE)
			           WHEN A.STD_CD = 'CPN_WORK_INCOME_PRINT_BUTTON'
			           THEN DECODE(A.STD_CD_VALUE,'1','Y','0','N')
			           WHEN A.STD_CD = 'CPN_TAX_CUTVAL'
			           THEN DECODE(A.STD_CD_VALUE,'0','1원','-1','10원')
			           WHEN A.STD_CD = 'CPN_YEA_DOJANG_TYPE'
			           THEN DECODE(A.STD_CD_VALUE,'2','증명서담당','5','회사인장')
			           WHEN A.STD_CD = 'CPN_YEA_JINGSUJA_TYPE'
			           THEN DECODE(A.STD_CD_VALUE,'C','회사명','P','대표자명')
			           WHEN A.STD_CD = 'CPN_YEA_PAY_STD_TYPE'
			           THEN DECODE(A.STD_CD_VALUE,'E','입사일','G','그룹입사일')
			           ELSE NVL(A.STD_CD_VALUE,'신규')
			       END OPT_VAL
			FROM (  /* 20231201 TYEA955설정을 1순위로 보도록 로직 조정. (F_YEA_GET_STD_CD_VALUE 함수와 로직 동기화) */		
				    SELECT #ssnEnterCd# AS ENTER_CD
				         , NVL(B.STD_CD, A.STD_CD) AS STD_CD
				         , NVL(B.STD_NM, A.STD_NM) AS STD_NM
				         , NVL(B.STD_CD_VALUE, A.STD_CD_VALUE) AS STD_CD_VALUE
					  FROM TSYS955 A
				         , TYEA955 B
					 WHERE A.ENTER_CD    = #ssnEnterCd#
					   AND A.STD_CD     IN ('CPN_MONPAY_RETRY_YN', 'CPN_YEA_FAMILY' , 'CPN_YEA_RETRO_YN' , 'CPN_YEA_SIM_YN' , 'CPN_YEA_MON_SHOW_YN' , 'CPN_WORK_INCOME_PRINT_BUTTON','CPN_TAX_CUTVAL','CPN_YEA_FEEDBACK_YN','CPN_YEA_PDF_YN', 'CPN_YEA_DED_PRINT_YN', 'CPN_YEA_JINGSUJA_TYPE', 'CPN_YEA_DOJANG_TYPE','CPN_YEA_PAYTOT_YN','CPN_YEA_PAYTAX_YN','CPN_YEA_PAYTAX_INS_YN', 'CPN_YEA_PREWORK_YN', 'CPN_YEA_HOU_INFO_YN', 'CPN_YEA_ADD_FILE_YN', 'YEACALCLST_STAMP_YN', 'CPN_YEA_PAY_STD_TYPE','CPN_YEA_SIGN_YN', 'CPN_YEA_PDF_TYPE', 'CPN_TAX_SPC_YN')
					   AND A.ENTER_CD    = B.ENTER_CD (+)
					   AND A.STD_CD      = B.STD_CD (+)
					   AND B.WORK_YY (+) = #searchWorkYy#
			        ) A
		     /* 20231201
		     [ 연말정산계산 ]
				- 버그 : 연말정산옵션에서 기준년도별 조회 안됨 (기준년도 의미없음)
				     => 조회시 현재년도(sysdate)와 기준년도를 비교하여 과거면 TYEA955, 현재면 TSYS955를 조회함
				        문제는 TYEA955를 년도별 저장을 할때 그 시점에 그냥 TSYS955를 같이 업데이트 처리함
				     => 기능을 살려보자 :: [ 연말정산 옵션 ](팝업)과 [ 전년대비 변경옵션 ] (레이어) 동기화 필요
				      !! 주의) TYEA955는 년도별 운영자료
				              TSYS955는 디폴트 운영자료
				               → 참조불가 : 실시간으로 언제든 데이터가 조정될 수 있음
				      !! 개선) 신규 테이블(TYEA956)에 연말정산 마감 버튼 클릭 시, 후처리로 해당년도의 옵션을 TYEA956에 갱신
				               → [ 연말정산계산 ]화면에서 전년대비 자료 참조를 TYEA956에서 확인
				      !! 개선사항시행) 2023년 귀속부터 기능 동작
				               → 전년도 2022년 자료부터 저장
				               → 단, 2022년도 자료는 2023-12-26일 1차 배포 시에 확정상태로 MIG 예정이므로
				                    2022년도 연말정산 계산 당시의 옵션을 정확하게 기록하는데 한계가 있음
		        , TYEA955 B */
		        , TYEA956 B
			WHERE A.ENTER_CD   = B.ENTER_CD(+)
			  AND A.STD_CD     = B.STD_CD(+)
			  AND B.WORK_YY(+) = TO_CHAR(TO_NUMBER(#searchWorkYy#)-1)
			  AND A.ENTER_CD   = #ssnEnterCd#
			  AND A.STD_CD IN ('CPN_MONPAY_RETRY_YN',
			             	   'CPN_YEA_FAMILY' ,
			                   'CPN_YEA_RETRO_YN' ,
			                   'CPN_YEA_SIM_YN' ,
			                   'CPN_YEA_MON_SHOW_YN' ,
			                   'CPN_WORK_INCOME_PRINT_BUTTON',
			                   'CPN_TAX_CUTVAL',
			                   'CPN_YEA_FEEDBACK_YN',
			                   'CPN_YEA_PDF_YN',
			                   'CPN_YEA_DED_PRINT_YN',
			                   'CPN_YEA_JINGSUJA_TYPE',
			                   'CPN_YEA_DOJANG_TYPE',
			                   'CPN_YEA_PAYTOT_YN',
			                   'CPN_YEA_PAYTAX_YN',
			                   'CPN_YEA_PAYTAX_INS_YN',
			                   'CPN_YEA_PREWORK_YN',
			                   'CPN_YEA_HOU_INFO_YN',
                               'CPN_YEA_ADD_FILE_YN',
                               'YEACALCLST_STAMP_YN',
                               'CPN_YEA_PAY_STD_TYPE',
                               'CPN_YEA_SIGN_YN',
                               'CPN_YEA_PDF_TYPE',
                               'CPN_TAX_SPC_YN'
                               )
            ORDER BY CASE
						WHEN A.STD_CD = 'CPN_YEA_FAMILY' THEN 1
						WHEN A.STD_CD = 'CPN_MONPAY_RETRY_YN' THEN 2
						WHEN A.STD_CD = 'CPN_YEA_RETRO_YN' THEN 3
						WHEN A.STD_CD = 'CPN_YEA_SIM_YN' THEN 4
						WHEN A.STD_CD = 'CPN_YEA_MON_SHOW_YN' THEN 5
						WHEN A.STD_CD = 'CPN_WORK_INCOME_PRINT_BUTTON' THEN 6
						WHEN A.STD_CD = 'CPN_TAX_CUTVAL' THEN 7
						WHEN A.STD_CD = 'CPN_YEA_FEEDBACK_YN' THEN 8
						WHEN A.STD_CD = 'CPN_YEA_PDF_YN' THEN 9
						WHEN A.STD_CD = 'CPN_YEA_DED_PRINT_YN' THEN 10
						WHEN A.STD_CD = 'CPN_YEA_DOJANG_TYPE' THEN 11
						WHEN A.STD_CD = 'CPN_YEA_JINGSUJA_TYPE' THEN 12
						WHEN A.STD_CD = 'CPN_YEA_PAYTOT_YN' THEN 13
						WHEN A.STD_CD = 'CPN_YEA_PREWORK_YN' THEN 14
						WHEN A.STD_CD = 'CPN_YEA_PAYTAX_YN' THEN 15
						WHEN A.STD_CD = 'CPN_YEA_PAYTAX_INS_YN' THEN 16
						WHEN A.STD_CD = 'CPN_YEA_HOU_INFO_YN' THEN 17
						WHEN A.STD_CD = 'CPN_YEA_ADD_FILE_YN' THEN 18
						WHEN A.STD_CD = 'YEACALCLST_STAMP_YN' THEN 19
						WHEN A.STD_CD = 'CPN_YEA_PAY_STD_TYPE' THEN 20
						WHEN A.STD_CD = 'CPN_YEA_SIGN_YN' THEN 21
						WHEN A.STD_CD = 'CPN_YEA_PDF_TYPE' THEN 22
						WHEN A.STD_CD = 'CPN_TAX_SPC_YN' THEN 23
            		 END
	   ]]>
	</query>

	<!-- 종전근무지 대상자  -->
	<query id="selectBfComTargetList">
		<![CDATA[
		SELECT *
		  FROM (
				SELECT A.SABUN
				     , B.NAME
				     , F_COM_GET_ORG_NM(C.ENTER_CD,C.ORG_CD,TO_CHAR(C.WORK_YY) || '1231') AS ORG_NM
				FROM TCPN817 A
				   , THRM100 B
				   , TCPN811 C
				WHERE A.ENTER_CD = B.ENTER_CD
				  AND A.SABUN = B.SABUN
				  AND B.ENTER_CD = C.ENTER_CD
				  AND B.SABUN = C.SABUN
			      AND A.ENTER_CD = C.ENTER_CD
				  AND A.WORK_YY = C.WORK_YY
				  AND A.ADJUST_TYPE = C.ADJUST_TYPE
				  AND A.SABUN = C.SABUN
				  AND A.ENTER_CD = #ssnEnterCd#
				  AND A.WORK_YY = #searchWorkYy#
				  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
				  $query$
				)
			GROUP BY SABUN, NAME, ORG_NM
			ORDER BY SABUN
	   ]]>
	</query>

	<!-- 연말정산 연급여 미생성 대상자  -->
	<query id="selectMonpayManTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND A.SABUN NOT IN ( SELECT DISTINCT(G.SABUN)
									 FROM TCPN813 G, TCPN811 H
									WHERE G.ENTER_CD = H.ENTER_CD
									  AND G.WORK_YY = H.WORK_YY
									  AND G.ADJUST_TYPE = H.ADJUST_TYPE
									  AND G.SABUN = H.SABUN
									  AND G.ENTER_CD = A.ENTER_CD
			  						  AND G.SABUN = A.SABUN
			  						  AND G.ENTER_CD = #ssnEnterCd#
			  						  AND G.WORK_YY = #searchWorkYy#
			  						  $queryH$
			  						  AND G.ADJUST_TYPE = '1')
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
		    ORDER BY A.SABUN

	   ]]>
	</query>

	<!-- 연급여 생성 대상자 - 마이너스 금액 발생  -->
	<query id="selectMinusTargetList">
		<![CDATA[
			SELECT T.SABUN
			     , B.NAME
			     , T.ORG_NM
			     , T.MON
			FROM (
					SELECT A.ENTER_CD
					     , A.SABUN
					     , B.ORG_NM
						 , NVL(SUM(NVL(A.PAY_MON,0)+NVL(A.BONUS_MON,0)+NVL(A.ETC_BONUS_MON,0)+NVL(A.STOCK_BUY_MON,0)+NVL(A.STOCK_UNION_MON,0)),0) AS MON
					FROM TCPN813 A, TCPN811 B
					WHERE A.ENTER_CD = B.ENTER_CD
					  AND A.WORK_YY = B.WORK_YY
					  AND A.ADJUST_TYPE = B.ADJUST_TYPE
					  AND A.SABUN = B.SABUN
					  AND A.ENTER_CD = #ssnEnterCd#
					  AND A.WORK_YY = #searchWorkYy#
					  AND A.ADJUST_TYPE = #searchAdjustType#
					  $queryB$
					GROUP BY A.ENTER_CD, A.SABUN, B.ORG_NM
			     ) T
				 , THRM100 B
			WHERE T.ENTER_CD = B.ENTER_CD
			AND T.SABUN = B.SABUN
			AND T.MON < 0
			AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR T.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY T.SABUN
	   ]]>
	</query>

	<!-- 연급여 생성 대상자 - 소숫점 금액 발생  -->
	<query id="selectPointTargetList">
		<![CDATA[
			SELECT T.SABUN
				 , B.NAME
				 , T.ORG_NM
			     , T.MON
			FROM (
					SELECT A.ENTER_CD
					     , A.SABUN
					     , B.ORG_NM
						 , NVL(SUM(NVL(A.PAY_MON,0)+NVL(A.BONUS_MON,0)+NVL(A.ETC_BONUS_MON,0)+NVL(A.STOCK_BUY_MON,0)+NVL(A.STOCK_UNION_MON,0)),0) AS MON
					FROM TCPN813 A, TCPN811 B
				   WHERE A.ENTER_CD = B.ENTER_CD
					 AND A.WORK_YY = B.WORK_YY
					 AND A.ADJUST_TYPE = B.ADJUST_TYPE
					 AND A.SABUN = B.SABUN
					 AND A.ENTER_CD = #ssnEnterCd#
					 AND A.WORK_YY = #searchWorkYy#
 					 AND A.ADJUST_TYPE = #searchAdjustType#
 					 $queryB$
				   GROUP BY A.ENTER_CD, A.SABUN, B.ORG_NM
				  ) T
				  , THRM100 B
			WHERE T.ENTER_CD = B.ENTER_CD
			AND T.SABUN = B.SABUN
			AND MOD(MON,1) != 0
			AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR T.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY SABUN
	   ]]>
	</query>

	<!-- [공제]주소사항 - 확정  -->
	<query id="selectAddrYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'2','1') = '1'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]주소사항 - 미확정  -->
	<query id="selectAddrNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'2','1') = '0'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]인적공제 - 확정  -->
	<query id="selectPerYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'1','1') = '1'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]인적공제 - 미확정  -->
	<query id="selectPerNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND SUBSTR(LPAD(INPUT_STATUS,'2','0'),'1','1') = '0'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]PDF등록 - 등록  -->
	<query id="selectPdfYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN851 A
			   , THRM100 B
			   , TCPN811 C
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND B.ENTER_CD = C.ENTER_CD
			  AND B.SABUN = C.SABUN
		      AND A.ENTER_CD = C.ENTER_CD
			  AND A.WORK_YY = C.WORK_YY
			  AND A.ADJUST_TYPE = C.ADJUST_TYPE
			  AND A.SABUN = C.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $query$
			  AND A.FORM_CD NOT IN ('P102M', 'O101M')
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			GROUP BY A.SABUN, B.NAME
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]PDF등록 - 미등록  -->
	<query id="selectPdfNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
				 , CASE WHEN A.SABUN NOT IN ( SELECT DISTINCT(G.SABUN)
									 FROM TCPN851 G, TCPN811 H
									WHERE G.ENTER_CD = H.ENTER_CD
									  AND G.WORK_YY = H.WORK_YY
									  AND G.ADJUST_TYPE = H.ADJUST_TYPE
									  AND G.SABUN = H.SABUN
									  AND G.ENTER_CD = #ssnEnterCd#
									  AND G.WORK_YY = #searchWorkYy#
									  AND G.ADJUST_TYPE = #searchAdjustType#
									  $queryH$
									  AND G.FORM_CD NOT IN ('P102M', 'O101M')
								  )
						THEN '미제출' ELSE '제출' END AS PDF_YN
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  AND A.PAY_ACTION_CD = #searchPayActionCd#
			  AND NVL(A.EXCEPT_YN, 'N') = 'N'
			  $queryA$
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
		    ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]신용카드 - 등록  -->
	<query id="selectCardYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN821 A
			   , THRM100 B
			   , TCPN811 C
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND B.ENTER_CD = C.ENTER_CD
			  AND B.SABUN = C.SABUN
		      AND A.ENTER_CD = C.ENTER_CD
			  AND A.WORK_YY = C.WORK_YY
			  AND A.ADJUST_TYPE = C.ADJUST_TYPE
			  AND A.SABUN = C.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $query$
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			GROUP BY A.SABUN, B.NAME, C.ORG_NM
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- [공제]신용카드 - 미등록  -->
	<query id="selectCardNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  AND A.PAY_ACTION_CD = #searchPayActionCd#
			  $queryA$
			  AND A.SABUN NOT IN ( SELECT DISTINCT(G.SABUN)
									 FROM TCPN821 G, TCPN811 H
									WHERE G.ENTER_CD = H.ENTER_CD
									  AND G.WORK_YY = H.WORK_YY
									  AND G.ADJUST_TYPE = H.ADJUST_TYPE
									  AND G.SABUN = H.SABUN
									  AND G.ENTER_CD = #ssnEnterCd#
									  AND G.WORK_YY = #searchWorkYy#
									  AND G.ADJUST_TYPE = #searchAdjustType#
									  $queryH$
								 )
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 본인 마감 - 마감  -->
	<query id="selectInputCloseYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.INPUT_CLOSE_YN,'N') = 'Y'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 본인 마감 - 미마감  -->
	<query id="selectInputCloseNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.INPUT_CLOSE_YN,'N') = 'N'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 담당자 마감 - 마감  -->
	<query id="selectApprvYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.APPRV_YN,'N') = 'Y'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 담당자 마감 - 미마감  -->
	<query id="selectApprvNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.APPRV_YN,'N') = 'N'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 계산내역 본인 확인 - 확인  -->
	<query id="selectConfirmYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.RESULT_CONFIRM_YN,'N') = 'Y'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 계산내역 본인 확인 - 미확인  -->
	<query id="selectConfirmNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.RESULT_CONFIRM_YN,'N') = 'N'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 연말정산 마감 - 미마감  -->
	<query id="selectFinalCloseNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.FINAL_CLOSE_YN,'N') = 'N'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 세금계산 인원 현황 - 작업  -->
	<query id="selectTaxYTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND A.PAY_PEOPLE_STATUS = 'J'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

	<!-- 세금계산 인원 현황 - 미작업  -->
	<query id="selectTaxNTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND A.PAY_PEOPLE_STATUS != 'J'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>
	
	<!-- 신고제외 대상자  -->
	<query id="selectExceptTargetList">
		<![CDATA[
			SELECT A.SABUN
				 , B.NAME
				 , A.ORG_NM
			FROM TCPN811 A
			   , THRM100 B
			WHERE A.ENTER_CD = B.ENTER_CD
			  AND A.SABUN = B.SABUN
			  AND A.ENTER_CD = #ssnEnterCd#
			  AND A.WORK_YY = #searchWorkYy#
			  AND A.ADJUST_TYPE = #searchAdjustType#
			  $queryA$
			  AND NVL(A.EXCEPT_YN, 'N') = 'Y'
			  AND (B.NAME LIKE '%' || #searchSbNm# || '%' OR A.SABUN LIKE '%' || #searchSbNm# || '%')
			ORDER BY A.SABUN
	   ]]>
	</query>

</root>