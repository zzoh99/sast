import{j as Q,k as Z}from"./CustomTemplate-CdYYQ4QA.js";import{_ as ee,w as f}from"./index-BFOXClhX.js";import{G as o,H as d,ad as le,d as b,w as L,x as ae,A as te,V as se,N as k,O as i,a4 as P,J as oe,L as ie,m as r,$ as m,K as x,u as p,F as C,M as E,l as R}from"./vendor-CtPgUq0z.js";import{D as U,o as K}from"./grid-DZpSPlx0.js";import{V as S}from"./draggable-Dyg8YGs-.js";import{_ as c}from"./common-D34F-MSN.js";import{V as ne}from"./VContainer-Ceb14mOA.js";const ue={},re={width:"100%",height:"220",viewBox:"0 0 1862 220",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMinYMid slice"},ce=le('<g clip-path="url(#clip0_1136_22925)"><rect width="100%" height="220"></rect><g opacity="0.9" clip-path="url(#clip1_1136_22925)"><rect width="1862" height="278" class="hr-bg-fill-1"></rect><rect x="491" y="278.95" width="931.378" height="1527.5" rx="465.689" transform="rotate(-76.8485 491 278.95)" class="hr-bg-fill-2"></rect><ellipse opacity="0.8" cx="445" cy="-280" rx="659" ry="345" class="hr-bg-fill-3"></ellipse></g></g><defs><clipPath id="clip0_1136_22925"><rect width="1862" height="278" fill="white"></rect></clipPath><clipPath id="clip1_1136_22925"><rect width="1862" height="278" fill="white"></rect></clipPath></defs>',2),de=[ce];function ye(s,T){return o(),d("svg",re,de)}const ge=ee(ue,[["render",ye]]),fe={class:"left-area"},me={class:"top-wrap grid-section"},pe={key:0,class:"icon-btn-wrap"},ve={class:"middle-wrap grid-section"},he={key:0,class:"icon-btn-wrap"},we={class:"bottom-wrap grid-section"},ke={key:0,class:"icon-btn-wrap"},be={class:"right-area grid-section"},xe={key:0,class:"icon-btn-wrap"},I={layoutBack:{backgroundColor:"#123690",borderColor:"transparent",backgroundImage:""},layouts:[{colNum:8,rowHeight:122,defaultW:2,responsive:!0,breakpoints:{lg:1200,md:768,sm:0},cols:{lg:8,md:8,sm:2},layout:[{x:0,y:0,w:4,h:2,i:0,static:!1,components:[]},{x:4,y:0,w:4,h:2,i:1,static:!1,components:[]}],styles:{backgroundColor:"#F6F8FE",borderColor:"#4C79EC",backgroundImage:""}},{colNum:8,rowHeight:122,defaultW:2,responsive:!0,breakpoints:{lg:1200,md:768,sm:0},cols:{lg:8,md:8,sm:2},layout:[{x:0,y:0,w:4,h:2,i:0,static:!1,components:[]},{x:4,y:0,w:4,h:2,i:"2",static:!1,components:[]}],styles:{backgroundColor:"#F6F8FE",borderColor:"transparent",backgroundImage:""}},{colNum:8,rowHeight:122,defaultW:2,responsive:!0,breakpoints:{lg:1200,md:768,sm:0},cols:{lg:8,md:8,sm:2},layout:[{x:0,y:0,w:4,h:2,i:0,static:!1,components:[]},{x:4,y:0,w:4,h:2,i:2,static:!1,components:[]}],styles:{backgroundColor:"#F8F8F8",borderColor:"transparent",backgroundImage:""}},{colNum:4,rowHeight:122,defaultW:1,responsive:!1,breakpoints:{lg:1200,md:768,sm:0},cols:{lg:4,md:4,sm:2},layout:[{x:0,y:0,w:4,h:2,i:0,static:!1,components:[]},{x:0,y:2,w:4,h:2,i:3,static:!1,components:[]},{x:0,y:4,w:4,h:2,i:5,static:!1,components:[]}],styles:{backgroundColor:"#F8F8F8",borderColor:"transparent",backgroundImage:""}}]},Ie={__name:"MainTemplate1",props:{layoutConfig:{type:Object,required:!0,default:()=>I},imageFiles:{type:Array,default:()=>[]},isEditPage:{type:Boolean,default:!1},useResponsive:{type:Boolean,default:!1},clickTrigger:{type:Boolean}},emits:["update:layoutConfig","update:imageFiles","update:isUpdated"],setup(s,{emit:T}){const F=s,W=T,a=b(c.cloneDeep(F.layoutConfig||I)),w=b(c.cloneDeep(F.imageFiles)),q=b(c.cloneDeep(a.value)),Y=b(c.cloneDeep(w.value)),A=()=>{const t=!c.isEqual(R(a.value),R(q.value))||!c.isEqual(R(w.value),R(Y.value));W("update:isUpdated",t)};L(()=>F.layoutConfig,t=>{t==null?c.isEqual(a.value,I)||(a.value=c.cloneDeep(I),q.value=c.cloneDeep(I)):c.isEqual(t,a.value)||(a.value=c.cloneDeep(t),q.value=c.cloneDeep(t))},{deep:!0,immediate:!0}),L(()=>F.imageFiles,t=>{c.isEqual(t,w.value)||(w.value=c.cloneDeep(t),Y.value=c.cloneDeep(t))},{deep:!0,immediate:!0}),L([a,w],([t,l])=>{W("update:layoutConfig",c.cloneDeep(t)),W("update:imageFiles",c.cloneDeep(l)),A()},{deep:!0});const N=b(!1),v=b(null),B=t=>{t==="layoutBack"?v.value="layoutBack":v.value=Number(t.replace("layout",""))-1,N.value=!0},j=(t,l)=>{const n=v.value==="layoutBack"?v.value:`layout${v.value}`;if(l){const y=l.name.substring(l.name.lastIndexOf(".")),g=w.value.find(h=>h.rFileName===n),e={imageUrl:t.backgroundImage,sFileName:n,rFileName:`${n}${y}`,file:l,seqNo:g?g.seqNo:null,updated:"Y"},u=w.value.findIndex(h=>h.sFileNm===n);u!==-1&&w.value.splice(u,1),w.value.push(e)}else if(t.backgroundImage===""){const y=w.value.find(g=>g.sFileName===n);y&&(y.updated="Y")}v.value==="layoutBack"?a.value.layoutBack={...a.value.layoutBack,...t}:a.value.layouts[v.value].styles={...a.value.layouts[v.value].styles,...t},N.value=!1},G=()=>{N.value=!1,v.value=null};function J(t){return(Math.max(...t.map(n=>parseInt(n.i,10)),-1)+1).toString()}function D(t){const l=Number(t.replace("layout",""))-1,n=a.value.layouts[l];let y=n.colNum;n.responsive&&window.innerWidth<=767&&(y=1);const g=new Set;n.layout.forEach(h=>{for(let M=h.x;M<h.x+h.w;M++)for(let O=h.y;O<h.y+h.h;O++)g.add(`${M},${O}`)});let e=0,u=0;for(;g.has(`${e},${u}`);)e++,e>=y&&(e=0,u++);n.layout.push({x:e,y:u,w:1,h:1,i:J(n.layout),static:!1,components:[]})}function _(t,l){const n=Number(l.replace("layout",""))-1,y=a.value.layouts[n];if(t.components.length>0)t.components=[];else{const g=y.layout.findIndex(e=>e.i===t.i);g>-1&&y.layout.splice(g,1)}}let z=null;const $=b(null),V=b(0),X=()=>{z=new ResizeObserver(t=>{for(const l of t){const n=l.contentRect.height;F.isEditPage?V.value=n+300:V.value=window.innerHeight}}),$.value&&z.observe($.value)};ae(async()=>{await te(),X()}),se(()=>{z&&$.value&&(z.unobserve($.value),z.disconnect())});function H(t,l){if(t>=4&&l>=4)return"lg";if(t>=4&&l>=2)return"md";if(t>=2&&l>=2)return"sm";if(t===2&&l===1)return"xs";if(t===1&&l===1)return"xxs"}return(t,l)=>{const n=Q,y=ge,g=Z;return o(),k(ne,{fluid:"",class:"pa-0 ceo-main grid-layout-container"},{default:i(()=>[P("div",{class:oe(["layout-container template-1",{edit:s.isEditPage}]),style:ie({minHeight:V.value+"px"})},[P("div",{class:"layout-wrap",ref_key:"layoutWrapRef",ref:$},[P("div",fe,[P("div",me,[s.isEditPage?(o(),d("div",pe,[r(f,{onClick:l[0]||(l[0]=e=>B("layout1"))},{default:i(()=>[m("mdi-format-color-fill")]),_:1}),r(f,{onClick:l[1]||(l[1]=e=>D("layout1"))},{default:i(()=>[m("mdi-plus-box-outline")]),_:1})])):x("",!0),r(p(U),{layout:a.value.layouts[0].layout,"onUpdate:layout":l[2]||(l[2]=e=>a.value.layouts[0].layout=e),"col-num":a.value.layouts[0].colNum,"row-height":a.value.layouts[0].rowHeight,"is-draggable":s.isEditPage,"is-resizable":!0,responsive:s.useResponsive,compact:!0,margin:[16,16],"use-css-transforms":s.isEditPage,breakpoints:a.value.layouts[0].breakpoints,cols:a.value.layouts[0].cols,class:"grid-container"},{default:i(()=>[(o(!0),d(C,null,E(a.value.layouts[0].layout,e=>(o(),k(p(K),{class:"grid-item",key:e.i,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!e.static&&s.isEditPage,"min-w":e.h===2?2:1,"max-w":e.h===1?2:4,"max-h":6},{default:i(()=>[r(p(S),{class:"drag-area w-full h-full",list:e.components,group:{name:"cards",pull:!1,put:!0},draggable:!1,animation:"100",forceFallback:!0},{default:i(()=>[(o(!0),d(C,null,E(e.components,u=>(o(),d("div",{class:"list-group-item w-full h-full",key:u.label},[r(n,{componentKey:u.key,size:H(e.w,e.h),isEditPage:s.isEditPage},null,8,["componentKey","size","isEditPage"])]))),128))]),_:2},1032,["list"]),s.isEditPage&&!(e.static&&e.components.length===0)?(o(),k(f,{key:0,onClick:u=>_(e,"layout1"),class:"close-icon"},{default:i(()=>[m("mdi-close-circle")]),_:2},1032,["onClick"])):x("",!0)]),_:2},1032,["x","y","w","h","i","is-resizable","min-w","max-w"]))),128))]),_:1},8,["layout","col-num","row-height","is-draggable","responsive","use-css-transforms","breakpoints","cols"])]),P("div",ve,[s.isEditPage?(o(),d("div",he,[r(f,{onClick:l[3]||(l[3]=e=>B("layout2"))},{default:i(()=>[m("mdi-format-color-fill")]),_:1}),r(f,{onClick:l[4]||(l[4]=e=>D("layout2"))},{default:i(()=>[m("mdi-plus-box-outline")]),_:1})])):x("",!0),r(p(U),{layout:a.value.layouts[1].layout,"onUpdate:layout":l[5]||(l[5]=e=>a.value.layouts[1].layout=e),"col-num":a.value.layouts[1].colNum,"row-height":a.value.layouts[1].rowHeight,"is-draggable":s.isEditPage,"is-resizable":!0,responsive:s.useResponsive,compact:!0,margin:[16,16],"use-css-transforms":s.isEditPage,breakpoints:a.value.layouts[1].breakpoints,cols:a.value.layouts[1].cols,class:"grid-container"},{default:i(()=>[(o(!0),d(C,null,E(a.value.layouts[1].layout,e=>(o(),k(p(K),{class:"grid-item",key:e.i,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!e.static&&s.isEditPage,"min-w":e.h===2?2:1,"max-w":e.h===1?2:4,"max-h":6},{default:i(()=>[r(p(S),{class:"drag-area w-full h-full",list:e.components,group:{name:"cards",pull:!1,put:!0},draggable:!1,animation:"100",forceFallback:!0},{default:i(()=>[(o(!0),d(C,null,E(e.components,u=>(o(),d("div",{class:"list-group-item w-full h-full",key:u.label},[r(n,{componentKey:u.key,size:H(e.w,e.h)},null,8,["componentKey","size"])]))),128))]),_:2},1032,["list"]),s.isEditPage&&!(e.static&&e.components.length===0)?(o(),k(f,{key:0,onClick:u=>_(e,"layout2"),class:"close-icon"},{default:i(()=>[m("mdi-close-circle")]),_:2},1032,["onClick"])):x("",!0)]),_:2},1032,["x","y","w","h","i","is-resizable","min-w","max-w"]))),128))]),_:1},8,["layout","col-num","row-height","is-draggable","responsive","use-css-transforms","breakpoints","cols"])]),P("div",we,[s.isEditPage?(o(),d("div",ke,[r(f,{onClick:l[6]||(l[6]=e=>B("layout3"))},{default:i(()=>[m("mdi-format-color-fill")]),_:1}),r(f,{onClick:l[7]||(l[7]=e=>D("layout3"))},{default:i(()=>[m("mdi-plus-box-outline")]),_:1})])):x("",!0),r(p(U),{layout:a.value.layouts[2].layout,"onUpdate:layout":l[8]||(l[8]=e=>a.value.layouts[2].layout=e),"col-num":a.value.layouts[2].colNum,"row-height":a.value.layouts[2].rowHeight,"is-draggable":s.isEditPage,"is-resizable":!0,responsive:s.useResponsive,compact:!0,margin:[16,16],"use-css-transforms":s.isEditPage,breakpoints:a.value.layouts[2].breakpoints,cols:a.value.layouts[2].cols,class:"grid-container"},{default:i(()=>[(o(!0),d(C,null,E(a.value.layouts[2].layout,e=>(o(),k(p(K),{class:"grid-item",key:e.i,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!e.static&&s.isEditPage,"min-w":e.h===2?2:1,"max-w":e.h===1?2:4,"max-h":6},{default:i(()=>[r(p(S),{class:"drag-area w-full h-full",list:e.components,group:{name:"cards",pull:!1,put:!0},draggable:!1,animation:"100",forceFallback:!0},{default:i(()=>[(o(!0),d(C,null,E(e.components,u=>(o(),d("div",{class:"list-group-item w-full h-full",key:u.label},[r(n,{componentKey:u.key,size:H(e.w,e.h)},null,8,["componentKey","size"])]))),128))]),_:2},1032,["list"]),s.isEditPage&&!(e.static&&e.components.length===0)?(o(),k(f,{key:0,onClick:u=>_(e,"layout3"),class:"close-icon"},{default:i(()=>[m("mdi-close-circle")]),_:2},1032,["onClick"])):x("",!0)]),_:2},1032,["x","y","w","h","i","is-resizable","min-w","max-w"]))),128))]),_:1},8,["layout","col-num","row-height","is-draggable","responsive","use-css-transforms","breakpoints","cols"])])]),P("div",be,[s.isEditPage?(o(),d("div",xe,[r(f,{onClick:l[9]||(l[9]=e=>B("layout4"))},{default:i(()=>[m("mdi-format-color-fill")]),_:1}),r(f,{onClick:l[10]||(l[10]=e=>D("layout4"))},{default:i(()=>[m("mdi-plus-box-outline")]),_:1})])):x("",!0),r(p(U),{layout:a.value.layouts[3].layout,"onUpdate:layout":l[11]||(l[11]=e=>a.value.layouts[3].layout=e),"col-num":a.value.layouts[3].colNum,"row-height":a.value.layouts[3].rowHeight,"is-draggable":s.isEditPage,"is-resizable":!0,responsive:!1,compact:!1,margin:[16,16],"use-css-transforms":s.isEditPage,class:"grid-container"},{default:i(()=>[(o(!0),d(C,null,E(a.value.layouts[3].layout,e=>(o(),k(p(K),{class:"grid-item",key:e.i,x:e.x,y:e.y,w:e.w,h:e.h,i:e.i,"is-resizable":!e.static&&s.isEditPage,"min-w":e.h===2?2:1,"max-w":e.h===1?2:4,"max-h":6},{default:i(()=>[r(p(S),{class:"drag-area w-full h-full",list:e.components,group:{name:"cards",pull:!1,put:!0},draggable:!1,animation:"100",forceFallback:!0},{default:i(()=>[(o(!0),d(C,null,E(e.components,u=>(o(),d("div",{class:"list-group-item w-full h-full",key:u.label},[r(n,{componentKey:u.key,size:H(e.w,e.h)},null,8,["componentKey","size"])]))),128))]),_:2},1032,["list"]),s.isEditPage&&!(e.static&&e.components.length===0)?(o(),k(f,{key:0,onClick:u=>_(e,"layout4"),class:"close-icon"},{default:i(()=>[m("mdi-close-circle")]),_:2},1032,["onClick"])):x("",!0)]),_:2},1032,["x","y","w","h","i","is-resizable","min-w","max-w"]))),128))]),_:1},8,["layout","col-num","row-height","is-draggable","use-css-transforms"])])],512),r(y)],6),r(g,{modelValue:N.value,"onUpdate:modelValue":l[12]||(l[12]=e=>N.value=e),onSelectColor:j,onCancel:G,initialStyle:v.value==="layoutBack"?a.value.layoutBack:a.value.layouts[v.value]?.styles},null,8,["modelValue","initialStyle"])]),_:1})}}};export{Ie as _};
