import{m as ye,V as ue}from"./VTextField-Bu6c6FYU.js";import{w as _,m as c,F as K,n as O,s as F,a as re,d as H,c as C,o as me,A as pe,D as Ve,x as we,$ as Se}from"./vendor-CtPgUq0z.js";import{b as be}from"./VInput-UL0OhirB.js";import{m as ke,u as Pe,a6 as xe,a7 as Te,a8 as Ie,w as ie,p as Ce,Q as Ae}from"./index-BFOXClhX.js";import{p as $,m as he,h as oe,y as ge,u as se,a2 as Re,B as le,as as De,C as ae,l as Fe,O as Be,a4 as Oe,t as J,I as _e,ae as Ee,al as Le,o as ce,w as Me,at as He,au as de,a1 as fe}from"./vuetify-DR-4rILF.js";import{h as Ue,i as qe,V as Ne,a as ve}from"./VList-Ox-UVslP.js";import{V as ze}from"./VMenu-Bx_eH7x8.js";import{V as Ke}from"./VCheckboxBtn-DexFo7ie.js";import{V as $e}from"./VChip-DO9wf5yx.js";const je=$({renderless:Boolean,...he()},"VVirtualScrollItem"),We=oe()({name:"VVirtualScrollItem",inheritAttrs:!1,props:je(),emits:{"update:height":e=>!0},setup(e,d){let{attrs:a,emit:f,slots:o}=d;const{resizeRef:v,contentRect:m}=ge(void 0,"border");_(()=>m.value?.height,s=>{s!=null&&f("update:height",s)}),se(()=>e.renderless?c(K,null,[o.default?.({itemRef:v})]):c("div",O({ref:v,class:["v-virtual-scroll__item",e.class],style:e.style},a),[o.default?.()]))}}),Qe=-1,Xe=1,ne=100,Ye=$({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Ge(e,d){const a=Re(),f=F(0);re(()=>{f.value=parseFloat(e.itemHeight||0)});const o=F(0),v=F(Math.ceil((parseInt(e.height)||a.height.value)/(f.value||16))||1),m=F(0),s=F(0),l=H(),h=H();let x=0;const{resizeRef:T,contentRect:r}=ge();re(()=>{T.value=l.value});const A=C(()=>l.value===document.documentElement?a.height.value:r.value?.height||parseInt(e.height)||0),E=C(()=>!!(l.value&&h.value&&A.value&&f.value));let k=Array.from({length:d.value.length}),p=Array.from({length:d.value.length});const V=F(0);let D=-1;function j(t){return k[t]||f.value}const I=De(()=>{const t=performance.now();p[0]=0;const n=d.value.length;for(let i=1;i<=n-1;i++)p[i]=(p[i-1]||0)+j(i-1);V.value=Math.max(V.value,performance.now()-t)},V),W=_(E,t=>{t&&(W(),x=h.value.offsetTop,I.immediate(),R(),~D&&pe(()=>{ae&&window.requestAnimationFrame(()=>{G(D),D=-1})}))});me(()=>{I.clear()});function Z(t,n){const i=k[t],g=f.value;f.value=g?Math.min(f.value,n):n,(i!==n||g!==f.value)&&(k[t]=n,I())}function w(t){return t=le(t,0,d.value.length-1),p[t]||0}function Q(t){return Je(p,t)}let L=0,B=0,U=0;_(A,(t,n)=>{n&&(R(),t<n&&requestAnimationFrame(()=>{B=0,R()}))});function X(){if(!l.value||!h.value)return;const t=l.value.scrollTop,n=performance.now();n-U>500?(B=Math.sign(t-L),x=h.value.offsetTop):B=t-L,L=t,U=n,R()}function M(){!l.value||!h.value||(B=0,U=0,R())}let Y=-1;function R(){cancelAnimationFrame(Y),Y=requestAnimationFrame(ee)}function ee(){if(!l.value||!A.value)return;const t=L-x,n=Math.sign(B),i=Math.max(0,t-ne),g=le(Q(i),0,d.value.length),S=t+A.value+ne,u=le(Q(S)+1,g+1,d.value.length);if((n!==Qe||g<o.value)&&(n!==Xe||u>v.value)){const y=w(o.value)-w(g),P=w(u)-w(v.value);Math.max(y,P)>ne?(o.value=g,v.value=u):(g<=0&&(o.value=g),u>=d.value.length&&(v.value=u))}m.value=w(o.value),s.value=w(d.value.length)-w(v.value)}function G(t){const n=w(t);!l.value||t&&!n?D=t:l.value.scrollTop=n}const te=C(()=>d.value.slice(o.value,v.value).map((t,n)=>({raw:t,index:n+o.value})));return _(d,()=>{k=Array.from({length:d.value.length}),p=Array.from({length:d.value.length}),I.immediate(),R()},{deep:!0}),{calculateVisibleItems:R,containerRef:l,markerRef:h,computedItems:te,paddingTop:m,paddingBottom:s,scrollToIndex:G,handleScroll:X,handleScrollend:M,handleItemResize:Z}}function Je(e,d){let a=e.length-1,f=0,o=0,v=null,m=-1;if(e[a]<d)return a;for(;f<=a;)if(o=f+a>>1,v=e[o],v>d)a=o-1;else if(v<d)m=o,f=o+1;else return v===d?o:f;return m}const Ze=$({items:{type:Array,default:()=>[]},renderless:Boolean,...Ye(),...he(),...ke()},"VVirtualScroll"),et=oe()({name:"VVirtualScroll",props:Ze(),setup(e,d){let{slots:a}=d;const f=Fe("VVirtualScroll"),{dimensionStyles:o}=Pe(e),{calculateVisibleItems:v,containerRef:m,markerRef:s,handleScroll:l,handleScrollend:h,handleItemResize:x,scrollToIndex:T,paddingTop:r,paddingBottom:A,computedItems:E}=Ge(e,Ve(e,"items"));return Be(()=>e.renderless,()=>{function k(){const V=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";m.value===document.documentElement?(document[V]("scroll",l,{passive:!0}),document[V]("scrollend",h)):(m.value?.[V]("scroll",l,{passive:!0}),m.value?.[V]("scrollend",h))}we(()=>{m.value=Oe(f.vnode.el,!0),k(!0)}),me(k)}),se(()=>{const k=E.value.map(p=>c(We,{key:p.index,renderless:e.renderless,"onUpdate:height":V=>x(p.index,V)},{default:V=>a.default?.({item:p.raw,index:p.index,...V})}));return e.renderless?c(K,null,[c("div",{ref:s,class:"v-virtual-scroll__spacer",style:{paddingTop:J(r.value)}},null),k,c("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:J(A.value)}},null)]):c("div",{ref:m,class:["v-virtual-scroll",e.class],onScrollPassive:l,onScrollend:h,style:[o.value,e.style]},[c("div",{ref:s,class:"v-virtual-scroll__container",style:{paddingTop:J(r.value),paddingBottom:J(A.value)}},[k])])}),{calculateVisibleItems:v,scrollToIndex:T}}});function tt(e,d){const a=F(!1);let f;function o(s){cancelAnimationFrame(f),a.value=!0,f=requestAnimationFrame(()=>{f=requestAnimationFrame(()=>{a.value=!1})})}async function v(){await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>requestAnimationFrame(s)),await new Promise(s=>{if(a.value){const l=_(a,()=>{l(),s()})}else s()})}async function m(s){if(s.key==="Tab"&&d.value?.focus(),!["PageDown","PageUp","Home","End"].includes(s.key))return;const l=e.value?.$el;if(!l)return;(s.key==="Home"||s.key==="End")&&l.scrollTo({top:s.key==="Home"?0:l.scrollHeight,behavior:"smooth"}),await v();const h=l.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(s.key==="PageDown"||s.key==="Home"){const x=l.getBoundingClientRect().top;for(const T of h)if(T.getBoundingClientRect().top>=x){T.focus();break}}else{const x=l.getBoundingClientRect().bottom;for(const T of[...h].reverse())if(T.getBoundingClientRect().bottom<=x){T.focus();break}}}return{onScrollPassive:o,onKeydown:m}}const lt=$({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:_e,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...Ue({itemChildren:!1})},"Select"),nt=$({...lt(),...Ee(ye({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...xe({transition:{component:Te}})},"VSelect"),vt=oe()({name:"VSelect",props:nt(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,d){let{slots:a}=d;const{t:f}=Le(),o=H(),v=H(),m=H(),s=ce(e,"menu"),l=C({get:()=>s.value,set:t=>{s.value&&!t&&v.value?.Î¨openChildren.size||(s.value=t)}}),{items:h,transformIn:x,transformOut:T}=qe(e),r=ce(e,"modelValue",[],t=>x(t===null?[null]:Me(t)),t=>{const n=T(t);return e.multiple?n:n[0]??null}),A=C(()=>typeof e.counterValue=="function"?e.counterValue(r.value):typeof e.counterValue=="number"?e.counterValue:r.value.length),E=be(),k=C(()=>r.value.map(t=>t.value)),p=F(!1),V=C(()=>l.value?e.closeText:e.openText);let D="",j;const I=C(()=>e.hideSelected?h.value.filter(t=>!r.value.some(n=>e.valueComparator(n,t))):h.value),W=C(()=>e.hideNoData&&!I.value.length||e.readonly||E?.isReadonly.value),Z=C(()=>({...e.menuProps,activatorProps:{...e.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),w=H(),Q=tt(w,o);function L(t){e.openOnClear&&(l.value=!0)}function B(){W.value||(l.value=!l.value)}function U(t){de(t)&&X(t)}function X(t){if(!t.key||e.readonly||E?.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(t.key)&&t.preventDefault(),["Enter","ArrowDown"," "].includes(t.key)&&(l.value=!0),["Escape","Tab"].includes(t.key)&&(l.value=!1),t.key==="Home"?w.value?.focus("first"):t.key==="End"&&w.value?.focus("last");const n=1e3;if(e.multiple||!de(t))return;const i=performance.now();i-j>n&&(D=""),D+=t.key.toLowerCase(),j=i;const g=h.value.find(S=>S.title.toLowerCase().startsWith(D));if(g!==void 0){r.value=[g];const S=I.value.indexOf(g);ae&&window.requestAnimationFrame(()=>{S>=0&&m.value?.scrollToIndex(S)})}}function M(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!t.props.disabled)if(e.multiple){const i=r.value.findIndex(S=>e.valueComparator(S.value,t.value)),g=n??!~i;if(~i){const S=g?[...r.value,t]:[...r.value];S.splice(i,1),r.value=S}else g&&(r.value=[...r.value,t])}else{const i=n!==!1;r.value=i?[t]:[],pe(()=>{l.value=!1})}}function Y(t){w.value?.$el.contains(t.relatedTarget)||(l.value=!1)}function R(){e.eager&&m.value?.calculateVisibleItems()}function ee(){p.value&&o.value?.focus()}function G(t){p.value=!0}function te(t){if(t==null)r.value=[];else if(fe(o.value,":autofill")||fe(o.value,":-webkit-autofill")){const n=h.value.find(i=>i.title===t);n&&M(n)}else o.value&&(o.value.value="")}return _(l,()=>{if(!e.hideSelected&&l.value&&r.value.length){const t=I.value.findIndex(n=>r.value.some(i=>e.valueComparator(i.value,n.value)));ae&&window.requestAnimationFrame(()=>{t>=0&&m.value?.scrollToIndex(t)})}}),_(()=>e.items,(t,n)=>{l.value||p.value&&!n.length&&t.length&&(l.value=!0)}),se(()=>{const t=!!(e.chips||a.chip),n=!!(!e.hideNoData||I.value.length||a["prepend-item"]||a["append-item"]||a["no-data"]),i=r.value.length>0,g=ue.filterProps(e),S=i||!p.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return c(ue,O({ref:o},g,{modelValue:r.value.map(u=>u.props.value).join(", "),"onUpdate:modelValue":te,focused:p.value,"onUpdate:focused":u=>p.value=u,validationValue:r.externalValue,counterValue:A.value,dirty:i,class:["v-select",{"v-select--active-menu":l.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":r.value.length,"v-select--selection-slot":!!a.selection},e.class],style:e.style,inputmode:"none",placeholder:S,"onClick:clear":L,"onMousedown:control":B,onBlur:Y,onKeydown:X,"aria-label":f(V.value),title:f(V.value)}),{...a,default:()=>c(K,null,[c(ze,O({ref:v,modelValue:l.value,"onUpdate:modelValue":u=>l.value=u,activator:"parent",contentClass:"v-select__content",disabled:W.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:R,onAfterLeave:ee},Z.value),{default:()=>[n&&c(Ne,O({ref:w,selected:k.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:u=>u.preventDefault(),onKeydown:U,onFocusin:G,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},Q,e.listProps),{default:()=>[a["prepend-item"]?.(),!I.value.length&&!e.hideNoData&&(a["no-data"]?.()??c(ve,{title:f(e.noDataText)},null)),c(et,{ref:m,renderless:!0,items:I.value},{default:u=>{let{item:y,index:P,itemRef:q}=u;const N=O(y.props,{ref:q,key:P,onClick:()=>M(y,null)});return a.item?.({item:y,index:P,props:N})??c(ve,O(N,{role:"option"}),{prepend:z=>{let{isSelected:b}=z;return c(K,null,[e.multiple&&!e.hideSelected?c(Ke,{key:y.value,modelValue:b,ripple:!1,tabindex:"-1"},null):void 0,y.props.prependAvatar&&c(Ie,{image:y.props.prependAvatar},null),y.props.prependIcon&&c(ie,{icon:y.props.prependIcon},null)])}})}}),a["append-item"]?.()]})]}),r.value.map((u,y)=>{function P(b){b.stopPropagation(),b.preventDefault(),M(u,!1)}const q={"onClick:close":P,onKeydown(b){b.key!=="Enter"&&b.key!==" "||(b.preventDefault(),b.stopPropagation(),P(b))},onMousedown(b){b.preventDefault(),b.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},N=t?!!a.chip:!!a.selection,z=N?He(t?a.chip({item:u,index:y,props:q}):a.selection({item:u,index:y})):void 0;if(!(N&&!z))return c("div",{key:u.value,class:"v-select__selection"},[t?a.chip?c(Ce,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:u.title}}},{default:()=>[z]}):c($e,O({key:"chip",closable:e.closableChips,size:"small",text:u.title,disabled:u.props.disabled},q),null):z??c("span",{class:"v-select__selection-text"},[u.title,e.multiple&&y<r.value.length-1&&c("span",{class:"v-select__selection-comma"},[Se(",")])])])})]),"append-inner":function(){for(var u=arguments.length,y=new Array(u),P=0;P<u;P++)y[P]=arguments[P];return c(K,null,[a["append-inner"]?.(...y),e.menuIcon?c(ie,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),Ae({isFocused:p,menu:l,select:M},o)}});export{vt as V};
